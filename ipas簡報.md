
# 資訊安全技術概論



## 資安維運技術
```
1.惡意程式防護與弱點管理 
2.資料安全及備份管理 
3.日誌管理
```
## 新興科技安全
```
1.雲端安全概論 
2.行動裝置安全概論 
3.物聯網安全概論
```

#### 重要資安概念 
```
邊界與分類(Boundary and classification) 
職務區隔(Segregation of duties, SOD) 
縱深防禦(Layered defense, defense in depth) 
單一脆弱點(Single point of failure, SPOF) 
阿奇里斯腱(Achilles heel) 
木桶理論(Bucker principle） 
僅知原則(Need to know)
```
#### 風險管理
```
方便就不安全
安全就不方便
```
## 作業系統與應用程式安全
```
1.作業系統安全 
2.作業系統與應用程式 (含資料庫與網頁)攻擊手法 
3.程式與開發安全
```
#### 重要字辭與定義
```
DDoS
可移動式設備
木馬
防毒
修補程式
社交工程
密碼強度
病毒/蠕蟲
VA & PT
特權工具
最低權限
登入安全管控(錯誤訊息)
資料庫稽核 
WSUS/Antivirus
網頁攻擊手法(SQL injection,XSS…)
勒索軟體 (對策) 
網頁安全/監控(置換)
驗證碼
各種主機攻擊手法特性 (Protocol)
WAF 
委外開發安全
要求
原碼檢測
委外開發合約
開發生命週期
安全
測試與驗收
安全規格分析
上線安全
Roll back plan
Code review
```
#### Black vs. White
```
1.偵查
2.掃描
3.漏洞利用

   白帽              黑帽
4.回報漏洞         4.提權
                  5.維持存取/控制
```
### 作業系統安全

#### 常見議題
```
• 弱點修補                 • 通行碼管理系統
– 老舊程式?                • 通行碼安全
• 可移除式媒體             • 變更管理
• 安全登入程序             • 容量管理
• 通行碼管理系統           • 開發測試與線上環境區隔  
• 程式源碼存取                
```
#### 常見應用程式的威脅
```
• 緩衝區溢位(Buffer overflow)
• 惡意程式碼(Malware)
• 輸入攻擊
• 後門程式
• 邏輯炸彈
• 行動應用(app)的攻擊
• 社交軟體的攻擊
• 記憶體洩漏 (Memory leaking)
```
#### 緩衝區溢位(Buffer overflow)
```
緩衝區是程式執行期間在記憶體中用來存放資料的空間

當應用程式處理資料時未檢查輸入資料的長度，就有可能讓太長的資料覆蓋到其他記憶體區段，
導致惡意程式碼被植入且被執行。
```
#### 惡意程式碼
```
• 惡意程式碼可分為病毒、蠕蟲、後門、木馬及間諜程式
• 這些惡意程式碼可能會附著在應用程式中，也可能獨立存在，導致程式執行效能變差與資料被竊。

• 病毒
– 需被動依賴寄宿的應用程式重製自已或感染其他程式

• 蠕蟲
– 自己有能力主動進行傳染散播的惡意程式

• 後門
– 留在系統內不需經一般安全控管程序，就可以被植入者遙控的惡意程式。

• 木馬
– 是一個陷阱程式，等待使用者踩到陷阱程式後，運用使用者權限執行不當的指令。

• 間諜程式
– 主要以竊取系統的機密資料為主的程式、例如：上網行為與鍵盤側錄等。

• 現今的惡意程式不見得只單純扮演一種角色，可結合各種不同的手法與行為感染與散播。
– 例如：USB病毒在USB硬碟時，運用病毒被動感染的方式感染電腦主機，一旦感染電腦主機後可能變成主動感染其他系統的蠕蟲。
```
#### 後門程式
```
• 留在系統內不需經一般安全控管程序，就可以被植入者遙控的惡意程式

• 維護用後門程式
– 開發人員私下留存在應用程式內，以方便日後進行維護的程式
– 應用程式於整合測試階段，應檢查應用程式中是否含有後門程式

• 被惡意植入的後門程式
– 由於應用程式其他的弱點(如：Command Injection)，導致惡意後門程式被植入應用系統中
– 應用程式清單應被妥善維護，以區別非授權程式，也可以善用檔案的完整性檢查工具
```
#### 邏輯炸彈
```
• 邏輯炸彈是一段被故意插入應用程式的程式片段，在正常情況下並不會被執行。只有當特定條件符合時才會被啟動
– 例如：程式設計師隱藏了一段刪除薪資資料庫的程式碼，只有當他被解僱的條件符合時才會被執行

• 有些病毒與蠕蟲也會具有邏輯炸彈的程式碼
– 例如：當4月1日愚人節時將硬碟刪除

• 應用程式於整合測試階段，應檢查應用程式中是否含有邏輯炸彈。
```

#### 常見帳密攻擊比較
```
暴力破解（Brute Force） 
使用所有可能的密碼組合，嘗試登入系統。

字典攻擊（Dictionary Attack）
收集常見的密碼納入猜測字典，然後用來嘗試登入系統。

密碼潑灑（Password Spraying）
只使用單一弱密碼，對所有帳號進行測試。

帳號填充（Credential Stuffing）
利用外洩帳號資料庫的密碼組合，嘗試登入系統。
```

#### 勒索軟體
```
• Ransomware
• 阻斷存取式攻擊Denial-of-access attack 

• 防禦
– 網路和郵件的內容過濾代理伺服器
– 限制級別存取
– 員工警覺性訓練
– 備份（回復檢查）
```
#### 已上線網站應用程式安全的防護
```
• 定期針對作業系統、網站伺服器及資料庫伺服器執行弱點掃描與修補

• 定期執行網站應用程式弱點掃描滲透測試
– 黑箱：不知軟體結構，直接驗證功能
– 白箱：取得較多訊息

• 有能力修改程式
– 修補已發現的應用程式弱點

• 無能力修改程式
– 建置Web應用程式防火牆進行弱點防禦或其他補償措施

• 新開發的應用程式請參考「安全軟體開發生命週期(SSDLC)」
```
#### 常見Port
```
        協定                                                   port
檔案傳輸        File Transfer Protocol, FTP                     21
安全遠端登錄    Secure Shell, SSH                               22
簡單郵件傳輸    Simple Mail Transfer Protocol, SMTP             23
網域名稱服務    Domain Name Service, DNS                        53
超文本傳輸      HyperText Transport Protocol, http              80
郵件接收        Post Office Protocol Version 3, POP3            110
網路時間        Network Time Protocol, NTP                      123
安全超文本傳輸   Hypertext Transfer Protocol Secure, https       443
網路芳鄰        使用SMB (Simple Message Block)，                 UDP137,138
                用NetBIOS來尋找設備，Linux 的Samba即為SMB軟體     TCP 139, 445
```
### 應用程式安全控制

#### 變更控制
```
• 原因
– 應用程式上線後因需求的變更、新功能要求及發現新瑕疵等因素，需要變更應用系統程式或組態。

• 目的
– 為維持變更後的安全狀態仍可符合安全政策要求

• 方法
– 組織應實作應用程式變更控制流程
– 必須確保變更是獲得授權、經過測試且被記錄下來的

• 變更控制流程必要的步驟
– 填寫變更需求申請
– 分析變更需求
– 發展實作策略、方法或步驟
– 計算變更所需成本
– 評估變更與安全的關聯性
– 記錄變更請求
– 提交變更申請進行核准
– 進行應用程式變更的開發工作
– 記錄變更開發的產出(新增或刪除功能)
– 將變更的程式碼與變更申請連結(程式碼中的註解)
– 將變更後的程式碼交付測試與品質認可
– 變更程式碼版本(上線)
– 向管理階層報告變更結果
```
#### 職責區隔
```
• 作業人員不應有權限存取線上的程式碼或程式物件

• 程式設計人員不應存取線上運作中的軟體

• 品管部門應測試程式碼品質，且與開發部門採用不同的測試方法

• 一旦軟體被開發測試完成應被保存在程式庫中

• 線上運作的軟體應由程式庫中發行，不應直接由程式設計人員或測試人員進行更新
```
#### 程式庫維護
```
• 應用程式應集中存放在程式庫中，並進行存取控管

• 程式庫進行版本控制，並保留所有版本程式碼
– 主版本：1.0
– 次版本：1.1
– 緊急修正版本：1.0.1

• 開發部門凍結版本後應簽入(Check In)到程式庫，也應由程式庫中簽出(Check Out)取得最新版本進行修改

• 測試部門應由程式庫中簽出(Check Out)取得最新版本進行測試

• 上線人員應由程式庫中發行(Release)最新版本應用程式至線上系統

```
#### 應用程式的品質與安全檢測
```
• 任何應用程式都有可能有瑕疵或是弱點
– 安全程式開發(secure programming)是直接嘗試消除程式瑕疵
– 安全檢測則是嘗試在有瑕疵的程式存在的情況下保護系統資源不受危害

• 使用者、程式設計者與系統管理員對於程式安全的認知是不同的

• 技術上可依病毒的特性對程式進行檢測

• 通常需要工具的輔助
```
#### 補充:行動應用(app)的安全問題
```
• 行動應用(app)也是應用程式的一類

• 駭客可以循傳統的技術進行病毒的感染

• 駭客也可以運用反向工程的技術來變造原來的程式，將變造以後的app送上程式商店引誘使用者下載

• 行動應用(app)的資安問題持續攀升

• 開發行動應用(app)時需注意採用的套件的安全

• app開發時，索取過多行動裝置上的敏感資訊，
例如:通訊錄、行事曆、座標位置、郵件、簡訊內容等，易侵犯隱私
```
### 程式與開發安全
#### 重要議題
```
• 開發政策               • 安全開發環境
– 擁抱新技術             • 安全測試
– 技術債                 • 驗收
• 系統變更程序           • 上線政策
• 平台變更後之技術審查    • 測試資料保護
• 軟體套件變更限制
```
#### 安全軟體開發生命週期簡介
```
• 安全的軟體開發生命週期(Secure SoftwareDevelopment LifeCycle, SSDLC)
意指發展一套安全的軟體之順序，主要可分為：

• 需求分析 (Requirements)
– 著重資安需求定義，以符合使用者需求與法規遵循為目的
• 架構設計 (Design)
– 根據需求分析結果，進行包含系統任務的目標、功能關聯、邊界範圍及各階層使用者的角色等內外部使用的規劃與搭配適當的資安架構
• 程式實作 (Implementation)
– 落實既有之規劃，將使用者介面、功能運作及安全性等完整的實現
• 測試與驗收 (Testing)
– 進行運作模擬，檢驗該系統的完成度，確保各項功能與安全性皆可符合既定的需求
• 部署與維運 (Maintenance)
– 進行軟體之部署，安排教育訓練
– 落實軟體之穩定運作，應定期修補漏洞(Patch)、按步升級更新版本(Upgrade)及即時監控(Monitor)
```
###　委外作業資安要求
#### 委外管理重點
```
• 委外實體與環境安全
– 防止組織場所內資訊因委外作業而遭未經授權的實體存取、損害及干擾，關鍵或敏感的資訊處理設施宜置放於安全區域

• 委外之作業管理
– 委外相關作業應符合組織安全政策與程序之要求

• 委外使用者存取管理
– 組織宜有正式程序，以控制資訊系統與服務的存取權限配置作業

• 委外資訊安全事故管理
– 委外組織宜備妥正式的事故通報與提報程序，提供委外作業廠商配合並施予合宜訓練

• 遵循適法性要求
– 組織於資訊系統設計、運作、使用及管理都應受法律、法令、法規或契約的安全要求所規範，所參照之規範宜明確界定、文件化及維持最新版本
```
#### 驗收與維護
```
• 組織執行「驗收階段」程序，係依據契約文件與「履約管理」階段執行成果辦理

• 以「專案工作計畫書」內容確認委外專案之進行方式、專案組織、相關時程及資訊安全要求事項是否符合

• 而委外廠商也須將定期召開工作進度報告會議之內容，如應完成重要工作項目、已完成工作的項目、預計工作項目、問題與建議等，提供驗收單位佐證

• 定期審查廠商效
```
#### 爭議處理
```
• 組織與廠商因履約管理產生爭議未能達成協議者，得以下列方式之一處理：
– 向採購申訴審議委員會申請調解
– 向仲裁機構提付仲裁

• 然若雙方於問題標準界定上有所爭議時
– 可蒐集發生的事證與相關資訊
– 尋求具公信力之第三者、學者專家、法院或調解委員會(如行政院公共工程委員會)等
– 進行問題的釐清與相關問題的調解
```
### 範例考題
```
1.當某一作業系統中的兩個程式因互相搶用資源而造成兩個程式均無法完成既定工作之結果，
請問此現象稱為？
• (A)碰撞（Collision）
• (B)死結（Deadlock）
• (C)佇列（Queue）
• (D)欺騙（Spoof）

2.關於資安組織OWASP（開放Web軟體安全計畫—Open Web Application Security Project），
下列敘述何者不正確？
• (A)是一個開放社群、營利性組織
• (B)主要目標是研議協助解決 Web 軟體安全之標準、工具與技術文件
• (C)長期協助政府或企業暸解並改善網頁應用程式與網頁服務的安全性
• (D)美國聯邦貿易委員會（FTC）強烈建議所有企業需遵循 OWASP 所發佈的十大 Web 弱點防護守則

3.請問針對作業系統訂定的資訊安全策略中，
下列何種安全模式中「檔案持有者」可授權決定「其他使用者」存取該檔案的權限？
• (A)自由存取控制（Discretionary AccessControl，DAC）
• (B)強制性存取控制（Mandatory AccessControl，MAC）
• (C)角色存取控制（Role-based Access Control，RBAC）
• (D)屬性存取控制（Attribute-based AccessControl，ABAC）

4.用在入侵和攻擊他人的電腦系統上，取得系統管理員的權限，
具有隱藏和遠端操控的能力；電腦病毒、間諜軟體等也常使用來隱藏蹤跡。
該工具軟體為？
• (A)Cookie
• (B)Rootkit
• (C)Backdoor
• (D)Phishing
```
## 網路與通訊安全
```
1.網路安全 
2.通訊安全
```
### 重要字辭與定義
```
DDoS
Private IP
OSI 模型
加密傳輸
SFTP vs. FTP 社交工程
DMZ
SQL Injection
法規: (例)個資法，跨國傳輸
Service
ports
中間人攻擊
Cookies
APT
釣魚
SPOF
… 各種網路攻擊手法特性 (protocol)
FW/ Proxy/WAF
Well-knownports (0-1024)
SSL/ TLS
```
#### 常見議題• 網段區隔
```
• 網段區隔      • 白名單 vs 黑名單
• 帳號安全      • 不明policy
• 權限審查      • 無線網路密碼管理
• 脆弱性管      • 無人區域無線網路
• 傳輸安全
• 金鑰管理
```
#### OSI 七層模型
```
Layer 1 實體層     Physical Layer,PHY
定義了最基礎的網路硬體標準，包括各種網路線、各種無線連線方式，各種設備規範、
以及各種接頭的規則，還有傳輸訊號的電壓等等。
Repeater (1轉１), Hub (1轉多）

Layer 2 資料連接層 Data-Link Layer
在這一層當中就制訂了 frame 的格式以及通過網路的方式。 包括訊框的資料格式、
錯誤控制、流量控制、檢查資料傳輸錯誤的方法等等，
常聽到的 MAC (media accesscontrol) 即在此層。 Physical addressBridge, Switch

Layer 3 網路層     Network Layer
IP (Internet Protocol) 就是在這一層定義的， 同時也定義出電腦之間的連線建立、終止與維持等，
資料封包 (packet) 的傳輸路徑選擇等等， 因此這個層級當中最重要的除了 IP 之外，
就是封包能否到達目的地的路由 (route) 概念   
Router

Layer 4 傳送層     Transport Layer
定義了發送端與接收端的連線技術，與封包格式，常見有：
Transmission Control Protocol, TCP 技術，三向交握，具可靠性。
User Datagram Protocol, UDP 則為非可靠性。

Layer 5 會談層      Session Layer
定義了兩個位址之間的連線通道之連接與掛斷，負責在資料
傳輸中設定和維護電腦網路中兩台電腦之間的通訊連接。

Layer 6 表現層      Presentation Layer
將來自本地端應用程式的資料格式轉換(或者是重新編碼)成為網路的標準格式。
在這個層級上面主要定義的是網路服務(或程式)之間的資料格式的轉換， 包括資料的加解密也是在這個分層上面處理。

Layer 7 應用層      Application Layer
與程式有關，提供為應用軟體而設的埠，以設定與另一應用軟體之間的通訊。
例如: HTTP，HTTPS，FTP，TELNET，SSH，SMTP，POP3等
```
#### 針對網路各層的攻擊手法
```
• 實體層
– 線路搭接與線路私接

• 資料連結層
– 封包監聽與ARP Spoofing

• 網路層
– Source Route、Smurf 、Ping of Death

• 連線層
– SYN Flood、DDoS及Session Hijacking

• 應用層
– DNS Poisoning、Brute force Login、SQL Injection及Cross-Site Scripting
```
### 實體層
```
• 攻擊方式 
– 搭接線路 (網路與電話)進行 訊號竊聽
– 私接線路變成隱匿通道(非控管中的線路)

• 防護建議
– 機房、機櫃、線路室及管道間進行存取控管
– 採用不同顏色區隔不同網段(安全區域)
– 定期的線路盤查
```
###  資料連結層
#### 資料連結層 – 封包監聽
```
• 透過工具或軟體被動蒐集網路封包

• 監聽工具
– Sniffer, MailSnarf
– URLSnarf, WebSpy
– Tcpdump ,Windump
– Wireshark(Ethereal)
– Ettercap
– NetIntercept

• 防護建議
– 採用加密連線(最佳方法)
– 改用Switch (別用Hub, 全都聽）
– 網路線路的實體存取控制，避免搭接或私接問題
```
#### 資料連結層 – ARP Spoofing
```
• 又稱為ARP flooding、ARP poisoning或ARP Poison Routing

• 在Broadcast Domain下無法被動監聽其他電腦間連線封包

• ARP Spoofing攻擊強迫偽冒其他IP，讓攻擊者有機會監測到其他電腦間的通訊

• ARP(Address	Resolution	Protocol)用來對應MAC與IP位址的協定

• 攻擊手法
– 攻擊者使用ARP Broadcast封包告訴其他電腦，192.168.1.1的MAC是Attacker的MAC
– 其他電腦要傳送給192.168.1.1的封包會被送到Attacker
– Attacker將封包錄下後轉送到真正的192.168.1.1

• 防護建議
– 強制使用靜態ARP Table(小型網路)
– 採用VLAN縮小Broadcast Domain的範圍
– 啟用Switch中的Port、MAC及IP的對應控管
```
